# AGENTS.md

このリポジトリはAIエージェント（Julesなど）によって拡張機能パックを自然言語で編集できるように整備されています。
Julesがこのリポジトリで作業を行う際は、以下のルールと手順を厳守してください。

## 1. パッケージマネージャーの強制実行 (Bun)
- 当プロジェクトでは **Bun** の使用を強制しています。（`package.json`の`preinstall`で`bunx only-allow bun`を設定し、npmやyarnを弾くようになっています）
- パッケージの追加やインストール、スクリプトの実行には必ず `bun`コマンドを使用してください。
  例: `bun install`, `bunx vsce package`

## 2. 拡張機能パックの編集
- 拡張機能を追加・削除する場合は、`package.json` の `"extensionPack"` 配列を直接編集してください。

## 3. バージョンのインクリメント
- 変更を行った場合は、必ず `package.json` の `"version"` プロパティをインクリメントしてください。
- インクリメントの基準はセマンティックバージョニング（[メジャー].[マイナー].[パッチ]）に従ってください。
  - `patch`: 拡張機能リストに変更がないドキュメント修正・CI修正など
  - `minor`: `extensionPack` に追加・削除がある機能更新（通常はこちら）
  - `major`: コンセプト変更や互換性に影響する大規模刷新
- 既にMarketplaceに存在するバージョン番号では `vsce publish` が失敗するため、公開対象の変更時は必ず未公開の新しいバージョンを設定してください。

## 4. CHANGELOG.mdの更新
- プロジェクトに変更を加えた際は、必ず `CHANGELOG.md` を最新の状態に更新してください。
- 更新したバージョン番号、日付、および具体的な変更内容（追加・削除・修正した拡張機能など）を他のリリースノートの形式に沿って記載してください。

## 5. README.mdの同期と更新
- `package.json` の `"extensionPack"` に追加・変更があった場合、**必ず `README.md` の記述も更新** してください。
- 現在 `package.json` に含まれているが、`README.md` に記載されていないパッケージが存在する可能性があります。（変更の際は既存のリストとの差分も確認し、README側への漏れがないようにすべて明文化してください）

## 6. ビルドとデプロイの自動化 (CI/CD)
- GitHub Actionsによる自動化が `publish.yml` として設定されています。
- `main`ブランチへ`package.json`の変更がプッシュされた際、もしくは手動実行（workflow_dispatch）によって、自動的にビルドとMarketplaceへのデプロイが行われます。
- Julesとしての作業完了後は、適切なコミットメッセージと共に変更をコミットし、プッシュまたはPull Requestを作成してください。
